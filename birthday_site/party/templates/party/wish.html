{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Make a Wish âœ¨</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      height: 100vh;
      background: linear-gradient(to top, #6e198b, #a664cf);
      overflow: hidden;
      font-family: 'Comic Sans MS', cursive, sans-serif;
      color: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      animation: fadeInBg 3s ease forwards;
    }

    @keyframes fadeInBg {
      from { opacity: 0; }
      to   { opacity: 1; }
    }

    .sparkles {
      position: fixed;
      width: 100%;
      height: 100%;
      top: 0; left: 0;
      z-index: 0;
      pointer-events: none;
    }

    .sparkle {
      position: absolute;
      width: 6px;
      height: 6px;
      background: white;
      border-radius: 50%;
      opacity: 0.8;
      animation: floatUp 12s linear infinite;
    }

    @keyframes floatUp {
      0% { transform: translateY(0); opacity: 1; }
      100% { transform: translateY(-100vh); opacity: 0; }
    }

    .message {
      z-index: 1;
      max-width: 600px;
      font-size: 1.5rem;
      line-height: 2.2rem;
      margin-bottom: 30px;
      opacity: 0;
      animation: fadeInText 2s ease forwards;
      animation-delay: 1s;
    }

    @keyframes fadeInText {
      from { opacity: 0; transform: translateY(20px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    #wishBtn {
      z-index: 1;
      padding: 15px 30px;
      font-size: 1.5rem;
      background: #9529cf;
      color: white;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      box-shadow: 0 0 10px #b342ec;
      transition: all 0.3s;
      animation: fadeInBtn 2s ease forwards;
      animation-delay: 3s;
    }

    #wishBtn:hover {
      transform: scale(1.1);
      box-shadow: 0 0 20px #ff99dd;
    }

    @keyframes fadeInBtn {
      from { opacity: 0; transform: scale(0.8); }
      to   { opacity: 1; transform: scale(1); }
    }

    #finalMsg {
      margin-top: 30px;
      font-size: 1.4rem;
      opacity: 0;
      animation: fadeInFinal 2s ease forwards;
      animation-delay: 0s;
      z-index: 1;
    }

    @keyframes fadeInFinal {
      from { opacity: 0; transform: scale(0.8); }
      to   { opacity: 1; transform: scale(1); }
    }

    canvas.confetti {
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      pointer-events: none;
      z-index: 999;
    }

    @media (max-width: 600px) {
      .message { font-size: 1.2rem; line-height: 1.8rem; }
      #wishBtn { font-size: 1.2rem; padding: 12px 24px; }
      #finalMsg { font-size: 1.2rem; }
    }
  </style>
</head>
<body>

<div class="sparkles"></div>

<div class="message">
  Youâ€™ve been the light in my ordinary days,<br>
  the laughter in my quiet moments,<br>
  and the friend I never knew I needed.<br><br>
  Today, I just want to say thank you for being my friend. And once again,<br>
  Happy Birthday , Anjali! ðŸŽ‰ðŸŽ‚ðŸŽˆ
</div>

<button id="wishBtn">ðŸŒŸ Make a Wish âœ¨</button>

<div id="finalMsg"></div>
<canvas class="confetti"></canvas>

<audio id="wishSong" autoplay loop>
  <source src="{% static 'wish_song.mp3' %}" type="audio/mpeg">
</audio>

<script>
window.addEventListener("DOMContentLoaded", () => {
  // Sparkles
  const sparklesContainer = document.querySelector('.sparkles');
  for (let i = 0; i < 80; i++) {
    const s = document.createElement('div');
    s.className = 'sparkle';
    s.style.left = Math.random() * 100 + 'vw';
    s.style.top = Math.random() * 100 + 'vh';
    s.style.animationDuration = (Math.random() * 8 + 4) + 's';
    sparklesContainer.appendChild(s);
  }

  // Wish button
  const btn = document.getElementById("wishBtn");
  const finalMsg = document.getElementById("finalMsg");

  btn.addEventListener("click", () => {
    triggerConfetti();
    btn.style.display = "none";

    finalMsg.innerHTML = `
      <div style="animation-delay: 1s;">
        <p style="margin-bottom: 15px;">I know the future feels uncertain right now.<br>
        But I believe in you â€” in your strength, your heart, and your dreams.<br>
        Youâ€™ve come so far, and youâ€™re going to go even further.<br>
        Whatever happens next, I hope you never forget how capable you are.</p>
        <strong>ðŸŒŸ You are the star today! Shine bright! ðŸŒŸ</strong>
      </div>
    `;
    finalMsg.style.animation = "fadeInFinal 2s ease forwards";
  });

  // Confetti
  const canvas = document.querySelector('.confetti');
  const ctx = canvas.getContext('2d');
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;

  window.addEventListener('resize', () => {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
  });

  const confettiPieces = [];
  for (let i = 0; i < 100; i++) {
    confettiPieces.push({
      x: Math.random() * canvas.width,
      y: Math.random() * canvas.height,
      r: Math.random() * 8 + 4,
      color: `hsl(${Math.random() * 360}, 80%, 60%)`,
      speed: Math.random() * 3 + 2
    });
  }

  function drawConfetti() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    confettiPieces.forEach(c => {
      ctx.beginPath();
      ctx.arc(c.x, c.y, c.r, 0, Math.PI * 2);
      ctx.fillStyle = c.color;
      ctx.fill();
    });
  }

  function updateConfetti() {
    confettiPieces.forEach(c => {
      c.y += c.speed;
      if (c.y > canvas.height) {
        c.y = -10;
        c.x = Math.random() * canvas.width;
      }
    });
  }

  function animateConfetti() {
    drawConfetti();
    updateConfetti();
    requestAnimationFrame(animateConfetti);
  }

  function triggerConfetti() {
    animateConfetti();
  }
});
</script>

</body>
</html>
